---
title: 'Style Dictionaryã‚’ä½¿ã£ãŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®ç®¡ç†'
---

## style-dictionaryã¨ã¯

todo

## ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

æœ€åˆã«ä½œã£ãŸãƒªãƒã‚¸ãƒˆãƒªã®ä¸­ã«ã€æ–°è¦ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œã‚Šã¾ã™ã€‚ã¤ã„ã§ã«æœ€ä½é™å¿…è¦ãªè¨­å®šã‚‚æ¸ˆã¾ã›ã¦ãŠãã¾ã™ã€‚

```zsh:zsh
  mkdir -p./packages/design-tokens
  cd ./packages/design-tokens
  pnpm init
  pnpm add -D style-dictionary
  pnpm style-dictionary init basic
  pnpm pkg set scripts.build="style-dictionary build"
  echo "build" > ./.gitignore
```

ä¸Šè¨˜ã§ä½œæˆã—ãŸãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚`tokens/*.json` ãŒãƒ“ãƒ«ãƒ‰å¯¾è±¡ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã§ã™ã€‚

<!-- prettier-ignore-start -->
```markdown
packages
â””â”€â”€ design-tokens
    â”œâ”€â”€ tokens
    â”‚   â”œâ”€â”€ colors.json
    â”‚   â”œâ”€â”€ dimensions.json
    â”‚   â”œâ”€â”€ object-values.json
    â”‚   â””â”€â”€ text.json
    â”œâ”€â”€ .gitignore
    â”œâ”€â”€ config.json
    â”œâ”€â”€ package.json
    â”œâ”€â”€ pnpm-lock.yaml
    â””â”€â”€ README.md
```
<!-- prettier-ignore-end -->

æ¬¡ã« `config.json` ã‚’ç”¨é€”ã«åˆã‚ã›ã¦ä¸€éƒ¨ä¿®æ­£ã—ã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§style-dictionaryã®ãƒ“ãƒ«ãƒ‰æ™‚ã®å‡ºåŠ›å…ˆã®ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€ãƒˆãƒ¼ã‚¯ãƒ³ã®å¤‰æ›å‡¦ç†ã‚’è¨­å®šã—ã¾ã™ã€‚
æœ¬è¨˜äº‹ã§ã¯ `tailwind.config.js` ã‹ã‚‰importã™ã‚‹ã“ã¨ã‚’å‰æã¨ã—ã¦ã„ã‚‹ãŸã‚ã€Formatã‚’ESM(ECMAScriptãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«)ã«é™å®šã—ã¾ã™ã€‚

[Configuration | Style Dictionary](https://v4.styledictionary.com/reference/config/)

```json:packages/design-tokens/config.json
{
  "source": ["tokens/**/*.json"],
  "platforms": {
    "js": {
      "transformGroup": "js",
      "buildPath": "build/js/",
      "files": [
        {
          "destination": "variables.js",
          "format": "javascript/esm",
          "options": {
            "minify": true
          }
        }
      ]
    }
  }
}
```

è¨­å®šã—ãŸã‚‰ `pnpm run build` ã§ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚`build/js/variables.js` ã«ESMã«å¤‰æ›ã•ã‚ŒãŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚

<!-- prettier-ignore-start -->
![built-tokens](/images/create-ui-library-vue/built-tokens.png =400x)
*ç”Ÿæˆã•ã‚ŒãŸãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã®JSãƒ•ã‚¡ã‚¤ãƒ«*
<!-- prettier-ignore-end -->

å®Ÿéš›ã« `tailwind.config.js` ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å¼•ãè¾¼ã‚“ã§ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚
ã‹ãªã‚Šè¡Œå„€ãŒæ‚ªã„ã§ã™ãŒä»Šå›ã¯ `packages/design-tokens/build/` ã®JSãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥å‚ç…§ã—ã¾ã™ã€‚åç§°ã¯ã‚ã‹ã‚Šã‚„ã™ã `custom-orange` ã«ã—ã¦ãŠãã¾ã™ã€‚

```diff javascript:tailwind.config.js
 import colors from "tailwindcss/colors";
+import tokens from "./packages/design-tokens/build/js/variables";

/** @type {import('tailwindcss').Config} */
 export default {
   content: ["./index.html", "./src/**/*.{vue,js,ts,jsx,tsx}"],
   theme: {
     colors: {
       transparent: "transparent",
       current: "currentColor",
       black: colors.black,
       white: colors.white,
       gray: colors.gray,
+      "custom-orange": tokens.colors.orange,
       primary: {
         DEFAULT: "#0054e9",
         contrast: "#ffffff",
         shade: "#004acd",
         tint: "#1a65eb",
       },
       secondary: {
         DEFAULT: "#0163aa",
         contrast: "#ffffff",
         shade: "#015796",
         tint: "#1a73b3",
       },
     },
     extend: {},
   },
   plugins: [],
 };
```

ã“ã‚Œã§Utility Classesã‹ã‚‰ `orange` ã®ObjectãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸğŸŠ
æ—©é€Ÿ `ButtonBase.vue` ã«colorã‚’è¿½åŠ ã—ã€ `App.vue` ã‹ã‚‰ `color: "orange"` ã‚’æ¸¡ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```diff vue:src/components/ButtonBase.vue
 <script setup lang="ts">
 import { computed } from "vue";

 interface Props {
   /** @default 'primary' */
-  color?: "primary" | "secondary";
+  color?: "primary" | "secondary" | "orange";
   /** @default 'medium' */
   size?: "small" | "medium" | "large";
 }

 const props = withDefaults(defineProps<Props>(), {
   color: "primary",
   size: "medium",
 });

 const emit = defineEmits<{
   (e: "click", payload: MouseEvent): void;
 }>();

 defineOptions({
   inheritAttrs: false,
 });

 const classes = computed<string[]>(() => {
   return [
     props.color === "secondary"
       ? "bg-secondary text-secondary-contrast"
+      : props.color === "orange"
+       ? "bg-custom-orange-600 text-custom-orange-100"
       : "bg-primary text-primary-contrast",
// ...
```

```diff vue:src/App.vue
 <script setup lang="ts">
 import ButtonBase from "./components/ButtonBase.vue";
 </script>

 <template>
   <div class="flex flex-col gap-y-2 p-4">
     <div class="flex items-center gap-x-2">
+      <ButtonBase color="orange">Orange ğŸŠ</ButtonBase>
       <ButtonBase>Primary Default</ButtonBase>
       <ButtonBase disabled>Primary Disabled</ButtonBase>
       <ButtonBase size="small">Primary Small</ButtonBase>
       <ButtonBase size="large">Primary Large</ButtonBase>
     </div>
```

<!-- prettier-ignore-start -->
![button-color-orange](/images/create-ui-library-vue/button-color-orange.png =800x)
*ã—ã£ã‹ã‚Šã‚ªãƒ¬ãƒ³ã‚¸è‰²ã§ã™ğŸŠ*
<!-- prettier-ignore-end -->

### npm packageã¨ã—ã¦installã™ã‚‹ãŸã‚ã®æº–å‚™

ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã‚’JavaScriptãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä½¿ã†å ´åˆã€ `pnpm add design-tokens` ã®ã‚ˆã†ãªå½¢ã§å¤–ã‹ã‚‰å¼•ãè¾¼ã‚ã‚‹ã®ãŒæœ›ã¾ã—ã„ã§ã™ã€‚
package.jsonã§ESMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç”¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’è¨­å®šã—ã¾ã—ã‚‡ã†ã€‚

```diff json:packages/design-tokens/package,json
 {
   "name": "design-tokens",
   "version": "1.0.0",
+  "type": "module",
   "description": "",
-  "main": "index.js",
+  "exports": "./build/js/variables.js",
+  "module": "./build/js/variables.js",
   "scripts": {
     "test": "echo \"Error: no test specified\" && exit 1",
     "build": "style-dictionary build"
   },
   "keywords": [],
   "author": "",
   "license": "ISC",
   "devDependencies": {
     "style-dictionary": "^4.3.0"
   }
 }
```

### pnpm workspaceã§è¦ªâ†’å­ã¸ã®Aliasã‚’ä½œã‚‹

ã‚ˆã†ã‚„ãã“ã“ã§pnpmã®å‡ºç•ªã§ã™ã€‚ [pnpm workspace](https://pnpm.io/workspaces)ã‚’ä½¿ã£ã¦monorepoã®linkã‚’ç°¡å˜ã«è¨­å®šã§ãã¾ã™ã€‚
ãƒªãƒã‚¸ãƒˆãƒªã®rootã« `pnpm-workspace.yaml` ã‚’ä½œã£ã¦ `packages/*` ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’npm packageã¨ã—ã¦installã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```zsh:zsh
  rm ./packages/design-tokens/pnpm-lock.yaml
  echo "packages:\n  - \"packages/*\"" > ./pnpm-workspace.yaml
```

```diff json:package.json
 {
   "name": "hands-on-app",
   "private": true,
   "version": "0.0.0",
   "type": "module",
   "scripts": {
     "dev": "vite",
     "build": "vue-tsc -b && vite build",
     "preview": "vite preview",
+    "build:design-tokens": "pnpm --filter design-tokens build",
   },
   "dependencies": {
+    "design-tokens": "workspace:*",
# ...
```

ã–ã£ãã‚Šè¨­å®šã¯å®Œäº†ã§ã™ã€‚`pnpm build:design-tokens && pnpm install` ã§ `node_modules/design-tokens` ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚æœ€å¾Œã« `tailwind.config.js` ã®å‚ç…§ã‚’Aliasã® `design-tokens` ã«å‘ã‘ç›´ã—ã¾ã™ã€‚

```diff javascript:tailwind.config.js
+import tokens from "design-tokens";
 import colors from "tailwindcss/colors";
-import tokens from "./packages/design-tokens/build/js/variables";
```

ã“ã‚Œã§ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’npm packageåŒ–ã—ã¦åˆ¥ã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰installã™ã‚‹ã¨ã“ã‚ã¾ã§å®Ÿæ–½ã§ãã¾ã—ãŸã€‚
æœ€å¾Œã« `pnpm run dev` ã§ã•ã£ãã¨åŒã˜ãã‚ªãƒ¬ãƒ³ã‚¸è‰²ã®ButtonBaseãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OKã§ã™ğŸ™†

## ã¾ã¨ã‚
