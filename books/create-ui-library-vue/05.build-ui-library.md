---
title: 'Vueã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåŒ–ã™ã‚‹'
---

å‰ã®ãƒšãƒ¼ã‚¸ã§ã¯ãƒ‡ã‚¶ã‚¤ãƒ³ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒª(npm package)ã¨ã—ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ„ã¿è¾¼ã¿ã¾ã—ãŸã€‚ã“ã“ã§ã¯å…±é€šåŒ–ã‚’è¡Œã†ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ä¸Šã’ã¦ã€Vueã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ„ã¿è¾¼ã‚€å‰æã®UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

## Viteã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ (ç¬¬äºŒé™£)

ç¬¬ä¸€é™£ã§ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®Webãƒãƒ³ãƒ‰ãƒ©ã¨ã—ã¦Viteã‚’ä½¿ã„ã¾ã—ãŸãŒã€ã“ã“ã§ã¯UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ³ãƒ‰ãƒ©ã¨ã—ã¦Viteã‚’ä½¿ã„ã¾ã™ã€‚
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ãƒ“ãƒ«ãƒ‰æ™‚ã®è¨­å®šã‚‚å¤‰ã‚ã‚‹ã®ã§ã€ `vite.config.ts` ã®ä¸­èº«ã‚‚æ¯”è¼ƒã—ãªãŒã‚‰ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’é€²ã‚ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

### monorepoã®è¿½åŠ 

`packages/` ã«è¿½åŠ ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚ä¸­ã§Viteã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”Ÿæˆã—ã¾ã—ã‚‡ã†ã€‚
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯ `ui` ã¨ã—ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨åŒã˜ãVite + TypeScriptã‚’é¸æŠã—ã¾ã™ã€‚
ã¾ãŸã€Tailwind CSSã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚‚æ¸ˆã¾ã›ã¦ãŠãã¾ã—ã‚‡ã†ã€‚

```zsh:zsh
  cd ./packages
  pnpm create vite@latest ui  --template vue-ts
  cd ./ui
  pnpm install
  pnpm add tailwindcss @tailwindcss/vite
  --- ä»¥é™ã®Tailwind CSSã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã¯çœç•¥ã—ã¾ã™ãŒã€å®Ÿæ–½ã—ã¾ã—ã‚‡ã† ---
```

å¾Œã»ã©ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã†ã®ã§ã€ä»¥ä¸‹ã®è¨­å®šã‚‚è¡Œã„ã¾ã™ã€‚

`ui` ã®ä¾å­˜é–¢ä¿‚ã« `design-tokens` ã‚’è¿½åŠ ã—ã¦ `pnpm install`

```diff json:packages/ui/package.json
 {
   "name": "ui",
   "private": true,
   "version": "0.0.0",
   "type": "module",
   "scripts": {
     "dev": "vite",
     "build": "vue-tsc -b && vite build",
     "preview": "vite preview"
   },
   "dependencies": {
+    "design-tokens": "workspace:*",
     "vue": "^3.5.13"
   },
   "devDependencies": {
     "@vitejs/plugin-vue": "^5.2.1",
     "@vue/tsconfig": "^0.7.0",
     "autoprefixer": "^10.4.20",
     "postcss": "^8.4.49",
     "tailwindcss": "^3.4.17",
     "typescript": "~5.6.2",
     "vite": "^6.0.5",
     "vue-tsc": "^2.2.0"
   }
 }
```

`style.css`, `packages/ui/src/style.css` ã§ã‚‚ãƒ™ã‚¿æ›¸ãã—ã¦ã„ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰å¼•ãã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚

```css:packages/ui/src/style.css
@import "tailwindcss";
@import "design-tokens/variables.css";
```

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰é…å¸ƒã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹

`ButtonBase.vue` ã¨åŒã˜å½¢ã§ `ui/components` ã« `ChipBase.vue` ã‚’ä½œã‚Šã¾ã™ã€‚ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æ§‹ç¯‰ãŒã‚´ãƒ¼ãƒ«ãªã®ã§å†…å®¹ã¯ç°¡æ˜“ã«ã—ã¦ã„ã¾ã™ã€‚å‹•ä½œç¢ºèªç­‰ã¯ç‰¹ã«è¡Œã‚ãªãã¦å¤§ä¸ˆå¤«ã§ã™ã€‚

```vue:packages/ui/components/ChipBase.vue
<script setup lang="ts"></script>

<template>
  <div
    class="bg-primary border-solid border-2 h-7 rounded-xl text-center text-primary-contrast w-32"
  >
    <span>
      <slot></slot>
    </span>
  </div>
</template>
```

æ¬¡ã« `ui/src/main.ts` ã‚’ä¸¸ã£ã¨æ›¸ãæ›ãˆã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ä½¿ã†æ™‚ã« `import {ChipBase} from "ui"` ã®ã‚ˆã†ã«named importã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```typescript:packages/ui/src/main.ts
export { default as ChipBase } from "./components/ChipBase.vue";
```

## Library Modeã®è¨­å®š

### Vite Library Modeã«ã¤ã„ã¦

Viteã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¢ãƒ¼ãƒ‰ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ä½¿ã‚ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãªé–¢æ•°ç­‰ã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ãƒãƒ³ãƒ‰ãƒ«ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã§ã™ã€‚`index.html` ã‚’Entry pointã¨ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ³ãƒ‰ãƒ«ã¨ã¯ç•°ãªã‚Šã€ `main.js` `index.ts` ã®ã‚ˆã†ãªJavaScript(TypeScript)ã‚’Entry pointã¨ã—ã€è¤‡æ•°ã®å½¢å¼ (ESM/CJS/UMD) ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚[^1]
[^1]: [Library Mode | Vite](https://vite.dev/guide/build#library-mode)

### Vue Componentã‚’Vite Libraryã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹

ã¾ãšã¯ `vite.config.ts` ã‚’Library Modeã«åˆã‚ã›ã¦æ›¸ãæ›ãˆã¾ã™ã€‚

```typescript:packages/ui/vite.config.ts
import vue from "@vitejs/plugin-vue";
import { resolve } from "path";
import { defineConfig } from "vite";

// https://vite.dev/config/
export default defineConfig({
  plugins: [vue()],
  build: {
    emptyOutDir: false, // d.tsã‚’æ¶ˆã•ãªã„ãŸã‚
    lib: {
      entry: resolve(__dirname, "src/main.ts"), // Entry pointã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š
      formats: ["es"], // Formatã¯ESMã«é™å®š
    },
    rollupOptions: {
      external: ["vue"], // Vueã‚’ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ³ãƒ‰ãƒ«ã«å«ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹
    },
  },
});
```

Viteã®ãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã¾ã¾ã ã¨å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«(`d.ts`)ãŒãƒ“ãƒ«ãƒ‰æ™‚ã«å‡ºåŠ›ã•ã‚Œã¾ã›ã‚“ã€‚
`tsconfig.app.json` ã‚’ä¿®æ­£ã—ã¦å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã‚‹(`dist` ã«å«ã‚ã‚‹)ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

```diff jsonc:packages/ui/tsconfig.app.json
 {
   "extends": "@vue/tsconfig/tsconfig.dom.json",
   "compilerOptions": {
     "tsBuildInfoFile": "./node_modules/.tmp/tsconfig.app.tsbuildinfo",

     /* Linting */
     "strict": true,
     "noUnusedLocals": true,
     "noUnusedParameters": true,
     "noFallthroughCasesInSwitch": true,
-    "noUncheckedSideEffectImports": true
+    "noUncheckedSideEffectImports": true,
+    "declaration": true,
+    "emitDeclarationOnly": true,
+    "outDir": "dist",
+    "noEmit": false
   },
   "include": ["src/**/*.ts", "src/**/*.tsx", "src/**/*.vue"]
 }
```

æœ€å¾Œã«ã€ `design-tokens` ã§ã‚‚ã‚„ã£ãŸã‚ˆã†ã« `package.json` ã‚‚ä¿®æ­£ã—ã¾ã™ã€‚
ä»Šå›ã¯å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å«ã‚€ã®ã§ `types` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ ã—ã¾ã™ã€‚

```diff json:packages/ui/package.json
 {
   "name": "ui",
   "private": true,
   "version": "0.0.0",
   "type": "module",
+  "exports": {
+    ".": {
+      "import": "./dist/ui.js",
+      "types": "./dist/main.d.ts"
+    }
+  },
+  "module": "./dist/ui.js",
+  "types": "./dist/main.d.ts",
+  "files": [
+    "dist"
+  ],
 # ...
```

`pnpm build (pnpm --filter ui build)` ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ã€distã®ä¸­ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ³ãƒ‰ãƒ«ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã®ãŒç¢ºèªã§ãã¾ã™ã€‚

<!-- prettier-ignore-start -->
```markdown
dist
â”œâ”€â”€ components
â”‚   â””â”€â”€ ChipBase.vue.d.ts
â”œâ”€â”€ main.d.ts
â”œâ”€â”€ ui.js
â””â”€â”€ ...
```
<!-- prettier-ignore-end -->

ã“ã‚Œã§UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®è¨­å®šã¯å®Œäº†ã§ã™ã€‚

## å®Ÿéš›ã«installã—ã¦å‹•ã‹ã™

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰installã™ã‚‹ã¨ã€pnpm workspaceã§ `node_modules` ã«Symbolic linkãŒä½œã‚‰ã‚Œã¾ã™ã€‚

```diff json:package.json
 {
   "name": "hands-on-app",
   "private": true,
   "version": "0.0.0",
   "type": "module",
   "scripts": {
     "dev": "vite",
     "build": "vue-tsc -b && vite build",
     "preview": "vite preview",
-    "build:design-tokens": "pnpm --filter design-tokens build"
+    "build:design-tokens": "pnpm --filter design-tokens build",
+    "build:ui": "pnpm --filter ui build"
   },
   "dependencies": {
     "design-tokens": "workspace:*",
+    "ui": "workspace:*",
 # ...
```

```zsh:zsh
  pnpm install
```

å®Ÿéš›ã« `App.vue` ã‹ã‚‰ `ChipBase` ã‚’importã—ã¦è¡¨ç¤ºã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```diff vue:src/App.vue
 <script setup lang="ts">
+import { ChipBase } from "ui";
 import ButtonBase from "./components/ButtonBase.vue";
 </script>

 <template>
   <div class="flex flex-col gap-y-2 p-4">
     <div class="flex items-center gap-x-2">
       <ButtonBase>Primary Default</ButtonBase>
       <ButtonBase disabled>Primary Disabled</ButtonBase>
       <ButtonBase size="small">Primary Small</ButtonBase>
       <ButtonBase size="large">Primary Large</ButtonBase>
     </div>

     <div class="flex items-center gap-x-2">
       <ButtonBase color="secondary">Secondary Default</ButtonBase>
       <ButtonBase color="secondary" disabled>Secondary Disabled</ButtonBase>
       <ButtonBase color="secondary" size="small">Secondary Small</ButtonBase>
       <ButtonBase color="secondary" size="large">Secondary Large</ButtonBase>
     </div>

+   <ChipBase>Chip</ChipBase>
   </div>
 </template>
```

ã¾ãŸã€Tailwind Configã®contentã§ã€Tailwind CSSã®UtilitiesãŒãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚å‚ç…§ã™ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚

```diff javascript:tailwind.config.js
 import tokens from "design-tokens";

 /** @type {import('tailwindcss').Config} */
 export default {
   content: [
     "./index.html",
     "./src/**/*.{vue,js,ts,jsx,tsx}",
+    "./node_modules/ui/dist/**/*.js",
  ],
 // ...
```

ã“ã“ã¾ã§å‡ºæ¥ã‚Œã°ã‚ã¨ã¯å‹•ã‹ã™ã ã‘ã§ã™ã€‚

```zsh:zsh
  pnpm run dev
```

<!-- prettier-ignore-start -->
![](/images/create-ui-library-vue/built-components.png =800x)
*ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰importã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«StyleãŒé©ç”¨ã•ã‚Œã¾ã™ğŸ‰*
<!-- prettier-ignore-end -->

## pnpm catalogsã§ä¾å­˜é–¢ä¿‚ã®ç®¡ç†ã‚’ä¸€å…ƒåŒ–ã™ã‚‹

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒªãƒã‚¸ãƒˆãƒªã¨UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒªãƒã‚¸ãƒˆãƒªä¸¡æ–¹ã§åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚`é–‹ç™ºæ™‚æ™‚ã«åŒã˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¯æƒãˆã‚‹` `åŒã˜ã‚«ãƒ†ã‚´ãƒªã®ä¾å­˜é–¢ä¿‚ã¯ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã™ã‚‹` ã®ã‚ˆã†ãªã“ã¨ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã«ã€`pnpm-workspace.yaml` ã§catalogsã®ç®¡ç†ã‚’ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚[^2]
[^2]: [Catalogs | pnpm](https://pnpm.io/catalogs)

```diff yaml:pnpm-workspace.yaml
  packages:
    - "packages/*"
+ catalogs:
+   vite-vue:
+     "vue": "3.3.13"
+     "@vitejs/plugin-vue": "^5.2.3"
+     "@vue/tsconfig": "0.6.0"
+     "typescript": "~5.6.2"
+     "vite": "^6.0.5"
+     "vue-tsc": "^2.2.8"
+   styles:
+     "@tailwindcss/vite": "^4.0.17"
+     "tailwindcss": "^4.0.17"
```

`package.json` ã® `dependencies` `devDependencies` ã§å®Ÿéš›ã«catalogsã‚’æŒ‡å®šã—ã¦ `pnpm install` ã‚’è¡Œã†ã¨ã€lockfileã§ã‚‚ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

```json:packages/ui/package.json
// ...
"dependencies": {
  "design-tokens": "workspace:*",
  "vue": "catalog:vite-vue"
},
"devDependencies": {
  "@types/node": "^22.10.5",
  "@vitejs/plugin-vue": "catalog:vite-vue",
  "@vue/tsconfig": "catalog:vite-vue",
  "autoprefixer": "catalog:styles",
  "postcss": "catalog:styles",
  "tailwindcss": "catalog:styles",
  "typescript": "catalog:vite-vue",
  "vite": "catalog:vite-vue",
  "vue-tsc": "catalog:vite-vue"
}
// ...
```

## ã¾ã¨ã‚

Viteã®Library Modeã‚’ä½¿ã£ã¦UIãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚installå…ˆã‹ã‚‰Tailwind CSSã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’é©ç”¨ã§ãã‚‹ã®ã§ã€CSSã‚’åˆ¥ã§ãƒ“ãƒ«ãƒ‰ã—ã¦ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‹ã‚‰é…ä¿¡ã™ã‚‹å¿…è¦ã‚‚ã‚ã‚Šã¾ã›ã‚“ã­ã€‚
TypeScriptã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾å¿œã™ã‚‹å ´åˆã¯ã€tsconfigã§declaration fileã‚’ç”Ÿæˆã™ã‚‹è¨­å®šã‚’ã™ã‚‹ã“ã¨ã¨ã€package.jsonã« `types` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’å®šç¾©ã™ã‚‹ã®ã‚’å¿˜ã‚Œãªã„ã‚ˆã†ã«ã—ã¾ã—ã‚‡ã†ã€‚

ã¾ãŸã€pnpm catalogsã§workspaceã®ä¾å­˜é–¢ä¿‚ã‚’ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã—ã¾ã—ãŸã€‚ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®ã‚ˆã†ãªã€ŒåŒã˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è‰²ã€…ãªæ‰€ã§ä½¿ã†monorepoã€ã§ã¯catalogsã®ã‚ˆã†ãªç®¡ç†æ–¹æ³•ã¯åˆç†çš„ã ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚
